# 多組織切換功能測試指南

## 🚀 快速測試

### 啟動應用
```bash
npm start
# 如果端口被占用
ng serve --port 4201 --open
```

---

## ✅ 測試檢查清單

### 1. 組織切換器顯示

- [ ] 左側邊欄頂部顯示組織切換器
- [ ] 顯示當前組織名稱（預設：個人空間）
- [ ] 顯示組織類型（個人空間 / 組織）
- [ ] 有下拉箭頭圖示

### 2. 組織列表

點擊組織切換器，下拉菜單應顯示：

- [ ] 個人空間（有勾選標記）
- [ ] 分隔線
- [ ] 「您的組織」標題
- [ ] 技術部 [擁有者] 標籤（紫色）
- [ ] 業務部 [管理員] 標籤（藍色）
- [ ] 產品部 [成員] 標籤（綠色）
- [ ] 分隔線
- [ ] 新增組織選項

### 3. 切換到組織（技術部）

- [ ] 點擊「技術部」
- [ ] 提示訊息：「已切換至 技術部」
- [ ] 所有 Tab 清除
- [ ] 跳轉到 /dashboard/workplace
- [ ] 組織切換器顯示「技術部」
- [ ] 側邊欄菜單更新為：
  - [ ] 儀表板
  - [ ] 組織管理
    - [ ] 部門管理
    - [ ] 員工管理
    - [ ] 角色管理
  - [ ] 快捷菜單

### 4. 切換到其他組織（業務部）

- [ ] 點擊「業務部」
- [ ] 提示訊息：「已切換至 業務部」
- [ ] 側邊欄菜單更新為：
  - [ ] 儀表板
  - [ ] 組織管理
    - [ ] 員工管理（僅此一項）

### 5. 切換回個人空間

- [ ] 點擊「個人空間」
- [ ] 提示訊息：「已切換至個人空間」
- [ ] 側邊欄菜單簡化為：
  - [ ] 儀表板
  - [ ] 快捷菜單

### 6. 新增組織

- [ ] 點擊右上角頭像 → 選擇「新增組織」
- [ ] Modal 彈窗顯示
- [ ] 填寫表單：
  - [ ] 組織名稱：測試組織
  - [ ] 組織類型：部門
- [ ] 點擊「確定」
- [ ] 提示：「組織「測試組織」創建成功」
- [ ] Modal 關閉
- [ ] 組織切換器下拉菜單中出現「測試組織 [擁有者]」

### 7. 持久化測試

- [ ] 切換到「技術部」
- [ ] 刷新頁面（F5）
- [ ] 自動恢復到「技術部」
- [ ] 側邊欄菜單正確顯示

---

## 🐛 **故障排查**

### 組織切換器沒有顯示？

**檢查**：
1. 瀏覽器控制台是否有錯誤
2. app-data.json 是否包含 `userOrganizations` 欄位
3. StartupService 是否正常執行

**修復**：
```bash
# 確認 app-data.json 格式正確
cat src/assets/tmp/app-data.json | grep userOrganizations
```

### 新增組織後沒有出現？

**檢查**：
1. OrganizationContextService.addOrganizationLocally() 是否被調用
2. Signal 是否正確更新

**修復**：
```typescript
// 已修復：使用 Signal 自動響應式更新
```

---

## 📖 完整文檔

詳見：`memory-bank/creative-phase/design-decisions/multi-org-implementation-guide.md`

