---
type: implementation-guide
category: testing
complexity: level-4
target_audience: [developer, tester]
reading_time: 10min
tags: [multi-org, testing, github-like, local-cache]
summary: å¤šçµ„ç¹”åˆ‡æ›ç³»çµ±å¯¦æ–½å®ŒæˆæŒ‡å—èˆ‡æœ¬åœ°æ¸¬è©¦èªªæ˜
related_files:
  - ./multi-organization-system-design.md
  - ../../../src/app/core/services/organization-context/
  - ../../../src/assets/tmp/app-data.json
implementation_date: 2025-10-07
status: completed
---

# å¤šçµ„ç¹”åˆ‡æ›ç³»çµ±å¯¦æ–½å®ŒæˆæŒ‡å—

## ğŸ‰ **å¯¦æ–½ç‹€æ…‹**

### âœ… **å·²å®Œæˆçš„åŠŸèƒ½**ï¼ˆ11/11ï¼‰

| éšæ®µ | ä»»å‹™ | ç‹€æ…‹ |
|-----|------|------|
| **éšæ®µ 1** | å‰µå»ºæ•¸æ“šæ¨¡å‹ | âœ… å®Œæˆ |
| **éšæ®µ 1** | å‰µå»º OrganizationContextService | âœ… å®Œæˆ |
| **éšæ®µ 1** | å‰µå»º UserOrganizationService | âœ… å®Œæˆ |
| **éšæ®µ 1** | æº–å‚™ Mock æ•¸æ“š | âœ… å®Œæˆ |
| **éšæ®µ 2** | å‰µå»º OrgSwitcherComponent | âœ… å®Œæˆ |
| **éšæ®µ 2** | æ•´åˆåˆ° BasicLayout | âœ… å®Œæˆ |
| **éšæ®µ 3** | å‰µå»º HTTP Interceptor | âœ… å®Œæˆ |
| **éšæ®µ 3** | æ•´åˆ StartupService | âœ… å®Œæˆ |
| **éšæ®µ 3** | é…ç½® app.config.ts | âœ… å®Œæˆ |
| **éšæ®µ 3** | æ›´æ–°å°å‡ºæª”æ¡ˆ | âœ… å®Œæˆ |
| **éšæ®µ 4** | Linter æª¢æŸ¥ | âœ… é€šé |

---

## ğŸ“‹ **å·²å‰µå»º/ä¿®æ”¹çš„æª”æ¡ˆæ¸…å–®**

### âœ¨ **æ–°å¢æª”æ¡ˆï¼ˆ10 å€‹ï¼‰**

```
src/app/features/organization/models/
â”œâ”€â”€ user-organization.model.ts              # ç”¨æˆ¶æ‰€å±¬çµ„ç¹”æ¨¡å‹
â”œâ”€â”€ organization-context.model.ts           # çµ„ç¹”ä¸Šä¸‹æ–‡æ¨¡å‹
â””â”€â”€ organization-membership.model.ts        # çµ„ç¹”æˆå“¡é—œä¿‚æ¨¡å‹

src/app/core/services/organization-context/
â”œâ”€â”€ organization-context.service.ts         # çµ„ç¹”ä¸Šä¸‹æ–‡æœå‹™ï¼ˆæ ¸å¿ƒï¼‰
â””â”€â”€ index.ts                                # å°å‡º

src/app/features/organization/services/
â””â”€â”€ user-organization.service.ts            # ç”¨æˆ¶çµ„ç¹”æœå‹™

src/app/layout/basic-layout/widgets/
â””â”€â”€ org-switcher.component.ts               # çµ„ç¹”åˆ‡æ›å™¨çµ„ä»¶

src/app/core/net/
â””â”€â”€ organization.interceptor.ts             # HTTP æ””æˆªå™¨

memory-bank/creative-phase/design-decisions/
â”œâ”€â”€ multi-organization-system-design.md     # å®Œæ•´è¨­è¨ˆæ–‡æª”
â””â”€â”€ multi-org-implementation-guide.md       # æœ¬æ–‡æª”
```

### ğŸ”§ **ä¿®æ”¹æª”æ¡ˆï¼ˆ6 å€‹ï¼‰**

```
src/app/features/organization/models/index.ts       # å°å‡ºæ–°æ¨¡å‹
src/app/core/index.ts                               # å°å‡ºæ–°æœå‹™
src/app/layout/basic-layout/basic.component.ts      # æ·»åŠ çµ„ç¹”åˆ‡æ›å™¨
src/app/core/startup/startup.service.ts             # åˆå§‹åŒ–çµ„ç¹”ä¸Šä¸‹æ–‡
src/app/app.config.ts                               # é…ç½® Interceptor
src/assets/tmp/app-data.json                        # Mock æ•¸æ“š
```

---

## ğŸš€ **æœ¬åœ°æ¸¬è©¦æŒ‡å—**

### âœ… **åŠŸèƒ½å·²é…ç½®ç‚ºæœ¬åœ°å¿«å–æ¸¬è©¦**

æ‰€æœ‰æœå‹™å·²ä¿®æ”¹ç‚º**å„ªå…ˆä½¿ç”¨æœ¬åœ°æ•¸æ“š**ï¼Œç„¡éœ€å¾Œç«¯ APIï¼š

#### 1. **çµ„ç¹”åˆ—è¡¨**
```typescript
// UserOrganizationService.getUserOrganizations()
// âœ… å¾ app-data.json çš„ userOrganizations è®€å–
```

#### 2. **çµ„ç¹”èœå–®**
```typescript
// UserOrganizationService.getOrganizationMenu(orgId)
// âœ… å¾ app-data.json çš„ organizationMenus[orgId] è®€å–
```

#### 3. **æ–°å¢çµ„ç¹”**
```typescript
// HeaderUserComponent.createOrganization()
// âœ… ç›´æ¥æ·»åŠ åˆ° OrganizationContextService çš„ Signal
// âœ… ç„¡éœ€ API èª¿ç”¨ï¼Œç«‹å³ç”Ÿæ•ˆ
```

---

## ğŸ¯ **æ¸¬è©¦æ­¥é©Ÿ**

### ç¬¬ä¸€æ­¥ï¼šå•Ÿå‹•æ‡‰ç”¨

```bash
npm start
# æˆ–æŒ‡å®šç«¯å£
ng serve --port 4201 --open
```

### ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹å·¦å´é‚Šæ¬„

ç™»å…¥å¾Œï¼Œæ‚¨æ‡‰è©²åœ¨**å·¦å´é‚Šæ¬„é ‚éƒ¨**çœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [é ­åƒ] å€‹äººç©ºé–“      â–¼  â”‚ â† çµ„ç¹”åˆ‡æ›å™¨
â”‚       å€‹äººç©ºé–“           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¬¬ä¸‰æ­¥ï¼šé»æ“Šçµ„ç¹”åˆ‡æ›å™¨

ä¸‹æ‹‰èœå–®æ‡‰è©²é¡¯ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ å€‹äººç©ºé–“               âœ“   â”‚ â† ç•¶å‰é¸ä¸­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‚¨çš„çµ„ç¹”                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åœ–] æŠ€è¡“éƒ¨ [æ“æœ‰è€…]          â”‚
â”‚ [åœ–] æ¥­å‹™éƒ¨ [ç®¡ç†å“¡]          â”‚
â”‚ [åœ–] ç”¢å“éƒ¨ [æˆå“¡]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â• æ–°å¢çµ„ç¹”                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¬¬å››æ­¥ï¼šæ¸¬è©¦çµ„ç¹”åˆ‡æ›

1. **é»æ“Šã€ŒæŠ€è¡“éƒ¨ã€**
   - âœ… æ‰€æœ‰ Tab æ‡‰è©²æ¸…é™¤
   - âœ… é é¢è·³è½‰åˆ° `/dashboard/workplace`
   - âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
     ```
     â€¢ å„€è¡¨æ¿
     â€¢ çµ„ç¹”ç®¡ç†
       - éƒ¨é–€ç®¡ç†
       - å“¡å·¥ç®¡ç†
       - è§’è‰²ç®¡ç†
     â€¢ å¿«æ·èœå–®
     ```
   - âœ… åˆ‡æ›å™¨é¡¯ç¤ºã€ŒæŠ€è¡“éƒ¨ã€
   - âœ… æç¤ºè¨Šæ¯ï¼šã€Œå·²åˆ‡æ›è‡³ æŠ€è¡“éƒ¨ã€

2. **é»æ“Šã€Œæ¥­å‹™éƒ¨ã€**
   - âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
     ```
     â€¢ å„€è¡¨æ¿
     â€¢ çµ„ç¹”ç®¡ç†
       - å“¡å·¥ç®¡ç†
     ```
   - âœ… åˆ‡æ›å™¨é¡¯ç¤ºã€Œæ¥­å‹™éƒ¨ã€

3. **é»æ“Šã€Œå€‹äººç©ºé–“ã€**
   - âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
     ```
     â€¢ å„€è¡¨æ¿
     â€¢ å¿«æ·èœå–®
     ```
   - âœ… åˆ‡æ›å™¨é¡¯ç¤ºã€Œå€‹äººç©ºé–“ã€

### ç¬¬äº”æ­¥ï¼šæ¸¬è©¦æ–°å¢çµ„ç¹”

1. **é»æ“Šå³ä¸Šè§’é ­åƒ**
2. **é¸æ“‡ã€Œæ–°å¢çµ„ç¹”ã€**
3. **å¡«å¯«è¡¨å–®**ï¼š
   - çµ„ç¹”åç¨±ï¼šæ¸¬è©¦çµ„ç¹”
   - çµ„ç¹”é¡å‹ï¼šéƒ¨é–€
   - å…¶ä»–æ¬„ä½ï¼šå¯é¸
4. **é»æ“Šã€Œç¢ºå®šã€**
5. **é©—è­‰**ï¼š
   - âœ… æç¤ºè¨Šæ¯ï¼šã€Œçµ„ç¹”ã€Œæ¸¬è©¦çµ„ç¹”ã€å‰µå»ºæˆåŠŸã€
   - âœ… çµ„ç¹”åˆ‡æ›å™¨ä¸‹æ‹‰èœå–®ä¸­å‡ºç¾ã€Œæ¸¬è©¦çµ„ç¹”ã€
   - âœ… è§’è‰²é¡¯ç¤ºç‚ºã€Œæ“æœ‰è€…ã€ï¼ˆç´«è‰²æ¨™ç±¤ï¼‰

---

## ğŸ—ï¸ **GitHub Teams åŠŸèƒ½å°æ‡‰**

### å•é¡Œï¼šçµ„ç¹”å…§æ˜¯å¦éœ€è¦ Teams åˆ†çµ„ï¼Ÿ

**ç­”æ¡ˆï¼šâœ… å·²ç¶“æœ‰äº†ï¼**

### æ¦‚å¿µå°æ‡‰

| GitHub æ¦‚å¿µ | æˆ‘å€‘çš„ç³»çµ± | èªªæ˜ |
|-----------|----------|------|
| **Organization** | **UserOrganization** | ç”¨æˆ¶æ‰€å±¬çš„é ‚å±¤çµ„ç¹”ï¼ˆç”¨æ–¼åˆ‡æ›ï¼‰ |
| **Teams** | **Organization** | çµ„ç¹”å…§éƒ¨çš„åœ˜éšŠ/éƒ¨é–€åˆ†çµ„ |
| **Members** | **Employee** | çµ„ç¹”/åœ˜éšŠçš„æˆå“¡ |

### çµæ§‹å°æ‡‰

#### GitHub çµæ§‹ï¼š
```
Organization: Acme Corp
â”œâ”€â”€ Teams
â”‚   â”œâ”€â”€ Engineering Team
â”‚   â”‚   â”œâ”€â”€ Frontend Team
â”‚   â”‚   â”œâ”€â”€ Backend Team
â”‚   â”‚   â””â”€â”€ DevOps Team
â”‚   â”œâ”€â”€ Product Team
â”‚   â””â”€â”€ Marketing Team
â””â”€â”€ Members
```

#### æˆ‘å€‘çš„ç³»çµ±çµæ§‹ï¼š
```
UserOrganization: æŠ€è¡“éƒ¨ï¼ˆç”¨æ–¼åˆ‡æ›ï¼‰
â””â”€â”€ Organizationsï¼ˆå…§éƒ¨çµæ§‹ï¼‰
    â”œâ”€â”€ Organization: å‰ç«¯çµ„ï¼ˆDepartmentï¼‰
    â”‚   â””â”€â”€ Employees: å‰ç«¯å·¥ç¨‹å¸«
    â”œâ”€â”€ Organization: å¾Œç«¯çµ„ï¼ˆDepartmentï¼‰
    â”‚   â””â”€â”€ Employees: å¾Œç«¯å·¥ç¨‹å¸«
    â””â”€â”€ Organization: æ¸¬è©¦çµ„ï¼ˆTeamï¼‰
        â””â”€â”€ Employees: æ¸¬è©¦å·¥ç¨‹å¸«
```

### æ•¸æ“šæ¨¡å‹å°æ‡‰

```typescript
// GitHub Organization = æˆ‘å€‘çš„ UserOrganization
interface UserOrganization {
  id: string | null;
  name: string;              // çµ„ç¹”åç¨±
  type: 'personal' | 'organization';
  role: 'owner' | 'admin' | 'member' | 'viewer';
}

// GitHub Team = æˆ‘å€‘çš„ Organization
interface Organization {
  id: string;
  name: string;              // åœ˜éšŠ/éƒ¨é–€åç¨±
  parentId: string | null;   // ä¸Šç´šåœ˜éšŠ
  type: OrganizationType;    // é¡å‹ï¼šéƒ¨é–€/åœ˜éšŠ/å°çµ„
  children?: Organization[]; // å­åœ˜éšŠ
}

// GitHub Member = æˆ‘å€‘çš„ Employee
interface Employee {
  id: string;
  name: string;
  departmentId: string;      // æ‰€å±¬åœ˜éšŠ/éƒ¨é–€
  role: string;
}
```

---

## ğŸ¨ **å´é‚Šæ¬„èœå–®é…ç½®**

### æ¯å€‹çµ„ç¹”éƒ½æœ‰ç¨ç«‹çš„å´é‚Šæ¬„èœå–®

#### å€‹äººç©ºé–“èœå–®
```json
{
  "personalMenu": [
    {
      "text": "å€‹äººå°èˆª",
      "children": [
        { "text": "å„€è¡¨æ¿", "link": "/dashboard/v1" },
        { "text": "å¿«æ·èœå–®", "shortcutRoot": true }
      ]
    }
  ]
}
```

#### çµ„ç¹”èœå–®ï¼ˆorg-001: æŠ€è¡“éƒ¨ï¼‰
```json
{
  "organizationMenus": {
    "org-001": [
      {
        "text": "çµ„ç¹”å°èˆª",
        "children": [
          { "text": "å„€è¡¨æ¿", "link": "/dashboard/workplace" },
          {
            "text": "çµ„ç¹”ç®¡ç†",
            "children": [
              { "text": "éƒ¨é–€ç®¡ç†", "link": "/organization/departments" },
              { "text": "å“¡å·¥ç®¡ç†", "link": "/organization/employees" },
              { "text": "è§’è‰²ç®¡ç†", "link": "/organization/roles" }
            ]
          },
          { "text": "å¿«æ·èœå–®", "shortcutRoot": true }
        ]
      }
    ]
  }
}
```

---

## ğŸ” **å¦‚ä½•æ·»åŠ çµ„ç¹”å°ˆå±¬èœå–®**

### æ–¹æ³•ä¸€ï¼šç›´æ¥ä¿®æ”¹ app-data.json

```json
{
  "organizationMenus": {
    "org-001": [
      {
        "text": "æŠ€è¡“éƒ¨å°èˆª",
        "group": true,
        "children": [
          {
            "text": "å°ˆæ¡ˆç®¡ç†",
            "icon": "anticon-project",
            "children": [
              { "text": "å‰ç«¯å°ˆæ¡ˆ", "link": "/projects/frontend" },
              { "text": "å¾Œç«¯å°ˆæ¡ˆ", "link": "/projects/backend" }
            ]
          },
          {
            "text": "æŠ€è¡“æ–‡æª”",
            "icon": "anticon-book",
            "link": "/docs/tech"
          }
        ]
      }
    ],
    "org-002": [
      {
        "text": "æ¥­å‹™éƒ¨å°èˆª",
        "group": true,
        "children": [
          {
            "text": "å®¢æˆ¶ç®¡ç†",
            "icon": "anticon-contacts",
            "link": "/customers"
          }
        ]
      }
    ]
  }
}
```

### æ–¹æ³•äºŒï¼šå‹•æ…‹ç”Ÿæˆèœå–®ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰

```typescript
// å¾Œç«¯ API
GET /api/organizations/:orgId/menu

Response:
[
  {
    "text": "çµ„ç¹”å°ˆå±¬èœå–®",
    "children": [
      // æ ¹æ“šçµ„ç¹”é¡å‹å’Œæ¬Šé™å‹•æ…‹ç”Ÿæˆ
    ]
  }
]
```

---

## ğŸ¯ **ç•¶å‰ç³»çµ±åŠŸèƒ½æ¸…å–®**

### âœ… **å·²å¯¦ç¾åŠŸèƒ½**

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|-----|------|------|
| å€‹äººç©ºé–“ | âœ… | é è¨­ç©ºé–“ï¼Œå…¨æ¬Šé™ |
| å¤šçµ„ç¹”æ”¯æŒ | âœ… | æ”¯æŒç„¡é™çµ„ç¹” |
| çµ„ç¹”åˆ‡æ›å™¨ | âœ… | å´é‚Šæ¬„é ‚éƒ¨ä¸‹æ‹‰é¸æ“‡ |
| çµ„ç¹”è§’è‰² | âœ… | Owner/Admin/Member/Viewer |
| è§’è‰²æ¨™ç±¤ | âœ… | å½©è‰²æ¨™ç±¤é¡¯ç¤ºè§’è‰² |
| ç¨ç«‹èœå–® | âœ… | æ¯å€‹çµ„ç¹”æœ‰ç¨ç«‹å´é‚Šæ¬„èœå–® |
| æ¬Šé™æ§åˆ¶ | âœ… | æ ¹æ“šè§’è‰²è¨­ç½® ACL æ¬Šé™ |
| Tab æ¸…é™¤ | âœ… | åˆ‡æ›æ™‚æ¸…é™¤æ‰€æœ‰ Tab |
| æŒä¹…åŒ– | âœ… | localStorage ä¿å­˜ç•¶å‰çµ„ç¹” |
| åˆ·æ–°æ¢å¾© | âœ… | åˆ·æ–°é é¢æ¢å¾©ä¸Šæ¬¡é¸æ“‡ |
| HTTP éš”é›¢ | âœ… | è‡ªå‹•æ·»åŠ  X-Organization-Id |
| æœ¬åœ°æ¸¬è©¦ | âœ… | ä½¿ç”¨ app-data.jsonï¼Œç„¡éœ€å¾Œç«¯ |
| æ–°å¢çµ„ç¹” | âœ… | Modal å½ˆçª—ï¼Œæœ¬åœ°å³æ™‚ç”Ÿæ•ˆ |

---

## ğŸ§ª **å®Œæ•´æ¸¬è©¦æµç¨‹**

### æ¸¬è©¦ 1ï¼šçµ„ç¹”åˆ‡æ›èˆ‡å´é‚Šæ¬„èœå–®

```
1. å•Ÿå‹•æ‡‰ç”¨ï¼šnpm start
2. ç™»å…¥ç³»çµ±
3. æŸ¥çœ‹å·¦å´é‚Šæ¬„ï¼š
   âœ… é ‚éƒ¨æ‡‰é¡¯ç¤ºã€Œå€‹äººç©ºé–“ã€çµ„ç¹”åˆ‡æ›å™¨
   âœ… èœå–®é¡¯ç¤ºï¼šå„€è¡¨æ¿ã€å¿«æ·èœå–®

4. é»æ“Šçµ„ç¹”åˆ‡æ›å™¨ï¼š
   âœ… ä¸‹æ‹‰èœå–®é¡¯ç¤ºï¼š
      - ğŸ‘¤ å€‹äººç©ºé–“ âœ“
      - æ‚¨çš„çµ„ç¹”
        - [åœ–] æŠ€è¡“éƒ¨ [æ“æœ‰è€…]
        - [åœ–] æ¥­å‹™éƒ¨ [ç®¡ç†å“¡]  
        - [åœ–] ç”¢å“éƒ¨ [æˆå“¡]
      - â• æ–°å¢çµ„ç¹”

5. é¸æ“‡ã€ŒæŠ€è¡“éƒ¨ã€ï¼š
   âœ… æç¤ºï¼šã€Œå·²åˆ‡æ›è‡³ æŠ€è¡“éƒ¨ã€
   âœ… æ‰€æœ‰ Tab æ¸…é™¤
   âœ… è·³è½‰åˆ° /dashboard/workplace
   âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
      â€¢ å„€è¡¨æ¿
      â€¢ çµ„ç¹”ç®¡ç†
        - éƒ¨é–€ç®¡ç†
        - å“¡å·¥ç®¡ç†
        - è§’è‰²ç®¡ç†
      â€¢ å¿«æ·èœå–®
   âœ… çµ„ç¹”åˆ‡æ›å™¨é¡¯ç¤ºã€ŒæŠ€è¡“éƒ¨ã€

6. é¸æ“‡ã€Œæ¥­å‹™éƒ¨ã€ï¼š
   âœ… æç¤ºï¼šã€Œå·²åˆ‡æ›è‡³ æ¥­å‹™éƒ¨ã€
   âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
      â€¢ å„€è¡¨æ¿
      â€¢ çµ„ç¹”ç®¡ç†
        - å“¡å·¥ç®¡ç†ï¼ˆåƒ…æ­¤ä¸€é …ï¼‰
   âœ… çµ„ç¹”åˆ‡æ›å™¨é¡¯ç¤ºã€Œæ¥­å‹™éƒ¨ã€

7. é¸æ“‡ã€Œç”¢å“éƒ¨ã€ï¼š
   âœ… æç¤ºï¼šã€Œå·²åˆ‡æ›è‡³ ç”¢å“éƒ¨ã€
   âœ… å´é‚Šæ¬„èœå–®æ›´æ–°ç‚ºï¼š
      â€¢ å„€è¡¨æ¿ï¼ˆåƒ…æ­¤ä¸€é …ï¼‰
   âœ… çµ„ç¹”åˆ‡æ›å™¨é¡¯ç¤ºã€Œç”¢å“éƒ¨ã€

8. åˆ‡æ›å›ã€Œå€‹äººç©ºé–“ã€ï¼š
   âœ… æç¤ºï¼šã€Œå·²åˆ‡æ›è‡³å€‹äººç©ºé–“ã€
   âœ… å´é‚Šæ¬„èœå–®æ¢å¾©ç‚ºï¼š
      â€¢ å„€è¡¨æ¿
      â€¢ å¿«æ·èœå–®
```

---

### æ¸¬è©¦ 2ï¼šæ–°å¢çµ„ç¹”

```
1. é»æ“Šå³ä¸Šè§’é ­åƒ â†’ é¸æ“‡ã€Œæ–°å¢çµ„ç¹”ã€
2. å¡«å¯«è¡¨å–®ï¼š
   - çµ„ç¹”åç¨±ï¼šæ¸¬è©¦çµ„ç¹” âœ… å¿…å¡«
   - çµ„ç¹”é¡å‹ï¼šéƒ¨é–€ âœ… å¿…å¡«
   - çµ„ç¹”ç·¨ç¢¼ï¼šTEST-001
   - çµ„ç¹”æè¿°ï¼šé€™æ˜¯æ¸¬è©¦çµ„ç¹”
   - æ’åºé †åºï¼š0

3. é»æ“Šã€Œç¢ºå®šã€

4. é©—è­‰ï¼š
   âœ… æç¤ºï¼šã€Œçµ„ç¹”ã€Œæ¸¬è©¦çµ„ç¹”ã€å‰µå»ºæˆåŠŸã€
   âœ… Modal é—œé–‰
   âœ… é»æ“Šçµ„ç¹”åˆ‡æ›å™¨ï¼Œä¸‹æ‹‰èœå–®ä¸­å‡ºç¾ã€Œæ¸¬è©¦çµ„ç¹” [æ“æœ‰è€…]ã€
   âœ… è§’è‰²æ¨™ç±¤ç‚ºç´«è‰²ï¼ˆæ“æœ‰è€…ï¼‰

5. åˆ‡æ›åˆ°ã€Œæ¸¬è©¦çµ„ç¹”ã€ï¼š
   âœ… æˆåŠŸåˆ‡æ›
   âœ… çµ„ç¹”åˆ‡æ›å™¨é¡¯ç¤ºã€Œæ¸¬è©¦çµ„ç¹”ã€
```

---

### æ¸¬è©¦ 3ï¼šæŒä¹…åŒ–èˆ‡åˆ·æ–°

```
1. åˆ‡æ›åˆ°ã€ŒæŠ€è¡“éƒ¨ã€
2. åˆ·æ–°é é¢ï¼ˆF5ï¼‰
3. é©—è­‰ï¼š
   âœ… è‡ªå‹•æ¢å¾©åˆ°ã€ŒæŠ€è¡“éƒ¨ã€
   âœ… å´é‚Šæ¬„èœå–®æ­£ç¢ºé¡¯ç¤ºçµ„ç¹”èœå–®
   âœ… çµ„ç¹”åˆ‡æ›å™¨é¡¯ç¤ºã€ŒæŠ€è¡“éƒ¨ã€
```

---

### æ¸¬è©¦ 4ï¼šHTTP Interceptor

```
1. åˆ‡æ›åˆ°ã€ŒæŠ€è¡“éƒ¨ã€
2. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· â†’ Network
3. æ“ä½œä»»ä½•åŠŸèƒ½ï¼ˆå¦‚æŸ¥çœ‹éƒ¨é–€åˆ—è¡¨ï¼‰
4. æª¢æŸ¥ HTTP è«‹æ±‚é ­ï¼š
   âœ… æ‡‰åŒ…å«ï¼šX-Organization-Id: org-001
   âœ… æ’é™¤çš„è«‹æ±‚ï¼ˆ/auth/, /assets/ ç­‰ï¼‰ä¸æ‡‰æœ‰æ­¤é ­

5. åˆ‡æ›åˆ°ã€Œå€‹äººç©ºé–“ã€
6. å†æ¬¡æª¢æŸ¥ HTTP è«‹æ±‚ï¼š
   âœ… ä¸æ‡‰åŒ…å« X-Organization-Id é ­
```

---

## âš ï¸ **å¸¸è¦‹å•é¡Œæ’æŸ¥**

### å•é¡Œ 1ï¼šå·¦å´é‚Šæ¬„æ²’æœ‰é¡¯ç¤ºçµ„ç¹”åˆ‡æ›å™¨

**åŸå› **ï¼š
- å¯èƒ½æ˜¯ OrganizationContextService åˆå§‹åŒ–å¤±æ•—
- å¯èƒ½æ˜¯ app-data.json æ²’æœ‰ userOrganizations æ¬„ä½

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// 1. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰éŒ¯èª¤
// 2. ç¢ºèª app-data.json åŒ…å« userOrganizations
// 3. æª¢æŸ¥ StartupService.load() æ˜¯å¦æ­£å¸¸åŸ·è¡Œ
```

---

### å•é¡Œ 2ï¼šæ–°å¢çµ„ç¹”å¾Œæ²’æœ‰å‡ºç¾

**åŸå› **ï¼š
- å¯èƒ½æ˜¯ addOrganizationLocally() æ²’æœ‰æ­£ç¢ºæ›´æ–° Signal
- å¯èƒ½æ˜¯çµ„ä»¶æ²’æœ‰è¨‚é–± Signal è®ŠåŒ–

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// å·²ä¿®å¾©ï¼šä½¿ç”¨ Signal è‡ªå‹•éŸ¿æ‡‰å¼æ›´æ–°
// OrgSwitcherComponent ä½¿ç”¨ computed() éæ¿¾çµ„ç¹”åˆ—è¡¨
```

---

### å•é¡Œ 3ï¼šåˆ‡æ›çµ„ç¹”å¾Œèœå–®æ²’æœ‰æ›´æ–°

**åŸå› **ï¼š
- OrganizationContextService.loadOrganizationMenu() å¯èƒ½å¤±æ•—
- app-data.json çš„ organizationMenus[orgId] ä¸å­˜åœ¨

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```json
// ç¢ºä¿ app-data.json åŒ…å«æ‰€æœ‰çµ„ç¹”çš„èœå–®é…ç½®
{
  "organizationMenus": {
    "org-001": [ ... ],
    "org-002": [ ... ],
    "org-003": [ ... ]
  }
}
```

---

## ğŸ“Š **æ•¸æ“šæµç¨‹åœ–**

### çµ„ç¹”åˆ‡æ›å®Œæ•´æµç¨‹

```
ç”¨æˆ¶é»æ“Šã€ŒæŠ€è¡“éƒ¨ã€
    â†“
OrgSwitcherComponent.switchToOrg(org)
    â†“
OrganizationContextService.switchToOrganization('org-001')
    â”œâ”€ 1. æ›´æ–° _currentContext Signal
    â”‚     âœ… UI è‡ªå‹•éŸ¿æ‡‰å¼æ›´æ–°
    â”œâ”€ 2. localStorage.setItem('current_organization_id', 'org-001')
    â”œâ”€ 3. TabService.clearTabs()
    â”œâ”€ 4. loadOrganizationMenu('org-001')
    â”‚     â”œâ”€ UserOrganizationService.getOrganizationMenu('org-001')
    â”‚     â”œâ”€ å¾ app-data.json.organizationMenus['org-001'] è®€å–
    â”‚     â”œâ”€ MenuService.clear()
    â”‚     â””â”€ MenuService.add(menuData)
    â”‚         âœ… å´é‚Šæ¬„èœå–®æ›´æ–°
    â”œâ”€ 5. updateACL('owner')
    â”‚     â””â”€ ACLService.setAbility(['admin', 'user', ...])
    â”‚         âœ… æ¬Šé™æ›´æ–°
    â””â”€ 6. Router.navigateByUrl('/dashboard')
        âœ… é é¢è·³è½‰
```

---

## ğŸŠ **åŠŸèƒ½å®Œæˆç¸½çµ**

### âœ… **å¯¦ç¾çš„ GitHub åŠŸèƒ½å°æ¯”**

| GitHub åŠŸèƒ½ | å¯¦ç¾ç‹€æ…‹ | èªªæ˜ |
|-----------|---------|------|
| çµ„ç¹”åˆ‡æ›å™¨ï¼ˆå·¦ä¸Šè§’ï¼‰ | âœ… å®Œæˆ | ä¸‹æ‹‰é¸æ“‡å™¨ |
| å€‹äººç©ºé–“ | âœ… å®Œæˆ | é è¨­ç©ºé–“ |
| å¤šçµ„ç¹”æ”¯æŒ | âœ… å®Œæˆ | ç„¡é™çµ„ç¹” |
| çµ„ç¹”è§’è‰² | âœ… å®Œæˆ | 4 ç¨®è§’è‰² + å½©è‰²æ¨™ç±¤ |
| çµ„ç¹”èœå–® | âœ… å®Œæˆ | æ¯å€‹çµ„ç¹”ç¨ç«‹å´é‚Šæ¬„ |
| Teamsï¼ˆåœ˜éšŠåˆ†çµ„ï¼‰ | âœ… å®Œæˆ | Organization æ¨¡å‹ï¼ˆéƒ¨é–€/åœ˜éšŠ/å°çµ„ï¼‰ |
| Membersï¼ˆæˆå“¡ç®¡ç†ï¼‰ | âœ… å®Œæˆ | Employee æ¨¡å‹ + å“¡å·¥ç®¡ç†é é¢ |
| æ¬Šé™éš”é›¢ | âœ… å®Œæˆ | ACL + HTTP Interceptor |
| æ•¸æ“šéš”é›¢ | âœ… å®Œæˆ | X-Organization-Id é ­ |
| å‰µå»ºçµ„ç¹” | âœ… å®Œæˆ | Modal å½ˆçª— + æœ¬åœ°æ¸¬è©¦ |

---

## ğŸš€ **ä¸‹ä¸€æ­¥å¢å¼·ï¼ˆå¯é¸ï¼‰**

### 1. çµ„ç¹”è¨­å®šé é¢
```
/organization/settings
- çµ„ç¹”åç¨±ã€Logo
- æˆå“¡æ¬Šé™è¨­å®š
- åŠŸèƒ½é–‹é—œ
```

### 2. æˆå“¡é‚€è«‹åŠŸèƒ½
```
- é€šééƒµç®±é‚€è«‹
- è§’è‰²åˆ†é…
- é‚€è«‹ç®¡ç†
```

### 3. çµ„ç¹”å…§éƒ¨ Teams ç®¡ç†
```
/organization/teams
- å‰µå»ºåœ˜éšŠï¼ˆDepartment/Team/Groupï¼‰
- åœ˜éšŠæˆå“¡åˆ†é…
- åœ˜éšŠæ¬Šé™è¨­å®š
```

### 4. çµ„ç¹”åˆ‡æ›å‹•ç•«
```typescript
// æ·»åŠ åˆ‡æ›å‹•ç•«æ•ˆæœ
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
```

---

## ğŸ“ **ç¸½çµ**

### âœ… **å›ç­”æ‚¨çš„å…©å€‹å•é¡Œ**

#### Q1: çµ„ç¹”è£¡é¢è¦æœ‰å»ºç«‹åœ˜éšŠçš„åˆ†çµ„åŠŸèƒ½å°å§ï¼Ÿ

**A: âœ… æ˜¯çš„ï¼Œè€Œä¸”å·²ç¶“æœ‰äº†ï¼**

- **UserOrganization**ï¼šç”¨æˆ¶æ‰€å±¬çš„é ‚å±¤çµ„ç¹”ï¼ˆé¡ä¼¼ GitHub Organizationï¼‰
- **Organization**ï¼šçµ„ç¹”å…§éƒ¨çš„åœ˜éšŠ/éƒ¨é–€åˆ†çµ„ï¼ˆé¡ä¼¼ GitHub Teamsï¼‰
- ç•¶å‰å·²æœ‰ï¼š
  - éƒ¨é–€ç®¡ç†ï¼ˆ/organization/departmentsï¼‰
  - å“¡å·¥ç®¡ç†ï¼ˆ/organization/employeesï¼‰
  - è§’è‰²ç®¡ç†ï¼ˆ/organization/rolesï¼‰

#### Q2: ç¾åœ¨çµ„ç¹”èƒ½å…ˆç”¨æœ¬åœ°å¿«å–æ¸¬è©¦åŠŸèƒ½å—ï¼Ÿ

**A: âœ… å®Œå…¨å¯ä»¥ï¼å·²å…¨éƒ¨é…ç½®ç‚ºæœ¬åœ°æ¸¬è©¦ï¼š**

- âœ… çµ„ç¹”åˆ—è¡¨ï¼šå¾ `app-data.json.userOrganizations` è®€å–
- âœ… çµ„ç¹”èœå–®ï¼šå¾ `app-data.json.organizationMenus[orgId]` è®€å–
- âœ… æ–°å¢çµ„ç¹”ï¼šç›´æ¥æ·»åŠ åˆ° Signalï¼Œç„¡éœ€ API
- âœ… æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥åœ¨**æ²’æœ‰å¾Œç«¯**çš„æƒ…æ³ä¸‹æ¸¬è©¦

---

**å¯¦æ–½ç‹€æ…‹**: âœ… 100% å®Œæˆ  
**æ¸¬è©¦ç‹€æ…‹**: âœ… å¯ç«‹å³æ¸¬è©¦  
**ç”Ÿç”¢å°±ç·’**: âš ï¸ éœ€è¦å¾Œç«¯ APIï¼ˆå·²æ¨™è¨» TODOï¼‰

